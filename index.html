<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MySocial Pro Feed</title>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-storage-compat.js"></script>

<style>
/* GENERAL */
body {margin:0;font-family:Segoe UI,sans-serif;background:#f0f2f5;}
.hidden{display:none;}
.card,input,button,textarea{border-radius:12px;}
button{cursor:pointer;outline:none;}
textarea{resize:none;}

/* NAVBAR */
.navbar{
  width:100%;position:fixed;top:0;left:0;
  display:flex;justify-content:space-between;align-items:center;
  padding:10px 20px;background:#1877f2;color:white;z-index:1000;
  box-shadow:0 2px 5px rgba(0,0,0,0.2);
}
.navbar img{height:40px;}
.navbar h1{margin-left:10px;font-size:22px;}
.navbar button{padding:6px 14px;border:none;background:#e60023;color:white;border-radius:20px;}

/* LAYOUT */
.main-container{display:flex;margin-top:70px;max-width:1200px;margin:auto;gap:20px;padding:10px;}
.sidebar-left,.sidebar-right{flex:1;min-width:220px;background:white;padding:15px;box-shadow:0 2px 8px rgba(0,0,0,0.1);}
.feed{flex:2;display:flex;flex-direction:column;gap:15px;}

/* POST BOX */
.post-box, .post{background:white;padding:15px;box-shadow:0 2px 12px rgba(0,0,0,0.1);}
.post-box textarea{width:100%;padding:12px;border:1px solid #ccc;font-size:14px;}
.post-box button{margin-top:8px;width:100%;padding:10px;background:#1877f2;color:white;border:none;font-weight:bold;}

/* POST CARD */
.post-header{display:flex;align-items:center;gap:10px;justify-content:space-between;}
.post-header img{width:50px;height:50px;border-radius:50%;object-fit:cover;}
.post-footer span{cursor:pointer;padding:5px 10px;border-radius:12px;margin-right:5px;transition:0.2s;}
.post-footer span:hover{background:#f0f2f5;}
.post-actions span{cursor:pointer;color:#1877f2;margin-right:8px;}

/* COMMENTS */
.comment-section{margin-top:10px;border-top:1px solid #eee;padding-top:10px;}
.comment{display:flex;align-items:flex-start;gap:10px;margin-bottom:8px;}
.comment img{width:35px;height:35px;border-radius:50%;object-fit:cover;}
.comment-content{background:#f0f2f5;padding:8px 10px;border-radius:15px;flex:1;}
.comment-footer span{cursor:pointer;padding:2px 6px;border-radius:12px;margin-right:4px;transition:0.2s;}
.comment-footer span:hover{background:#ddd;}
.comment-input{margin-top:5px;width:100%;padding:8px;border:1px solid #ccc;border-radius:20px;}

/* LOGIN/REGISTER CARDS */
.card{width:400px;background:#fff;padding:30px;margin:100px auto;box-shadow:0 20px 40px rgba(0,0,0,0.15);}
input,textarea{width:100%;padding:12px;margin:8px 0;border:1px solid #ccc;}
.link{display:block;text-align:center;margin-top:10px;color:#1877f2;cursor:pointer;}

/* RESPONSIVE */
@media(max-width:900px){
  .main-container{flex-direction:column;}
  .sidebar-left,.sidebar-right{order:2;}
  .feed{order:1;}
}
</style>
</head>
<body>

<!-- LOGIN -->
<div id="login" class="card">
  <h2>Login</h2>
  <input id="loginEmail" placeholder="Email">
  <input id="loginPass" type="password" placeholder="Password">
  <button onclick="login()">Login</button>
  <div class="link" onclick="show('register')">Create account</div>
  <div class="link" onclick="resetPassword()">Forgot password?</div>
</div>

<!-- REGISTER -->
<div id="register" class="card hidden">
  <h2>Create Account</h2>
  <input id="regEmail" placeholder="Email">
  <input id="regPass" type="password" placeholder="Password">
  <input id="regAvatar" type="file" accept="image/*">
  <button onclick="register()">Register</button>
  <div class="link" onclick="show('login')">Back</div>
</div>

<!-- HOME -->
<div id="home" class="hidden">
  <div class="navbar">
    <div style="display:flex;align-items:center;">
      <img src="https://via.placeholder.com/40" alt="Logo">
      <h1>MySocial Pro</h1>
    </div>
    <button onclick="logout()">Logout</button>
  </div>
  <div class="main-container">
    <div class="sidebar-left">
      <h3>Profile</h3>
      <div style="display:flex;align-items:center;gap:10px;margin-bottom:10px;">
        <img id="userAvatar" src="https://via.placeholder.com/50" alt="Avatar">
        <p id="userEmail"></p>
      </div>
      <hr>
      <h3>Follow Users</h3>
      <ul id="followList"></ul>
    </div>
    <div class="feed">
      <div class="post-box">
        <textarea id="postText" rows="3" placeholder="What's on your mind?" onkeydown="if(event.key==='Enter'&&!event.shiftKey){addPost();event.preventDefault();}"></textarea>
        <button onclick="addPost()">Post</button>
      </div>
      <div id="postsContainer"></div>
    </div>
    <div class="sidebar-right">
      <h3>Suggestions</h3>
      <ul id="suggestionsList"></ul>
    </div>
  </div>
</div>

<script>
// Firebase config
const firebaseConfig = {
    apiKey: "AIzaSyBc-ie4WnBkVMfrb5halHIaKWHGyy3zGC4",
    authDomain: "website-ab5ea.firebaseapp.com",
    projectId: "website-ab5ea",
    storageBucket: "website-ab5ea.firebasestorage.app",
    messagingSenderId: "1094491609955",
    appId: "1:1094491609955:web:4ac93d44c03490cd3d5156"
  };
firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();
const db = firebase.firestore();
const storage = firebase.storage();

// Show/hide
function show(id){["login","register","home"].forEach(v=>document.getElementById(v)?.classList.add("hidden"));document.getElementById(id).classList.remove("hidden");}

// REGISTER
function register(){
  const email=regEmail.value.trim(),pass=regPass.value,file=regAvatar.files[0];
  if(!email||!pass){alert("Enter email/password"); return;}
  auth.createUserWithEmailAndPassword(email,pass).then(cred=>{
    const uid=cred.user.uid;
    const avatarRef=storage.ref("avatars/"+uid);
    let upload=file?avatarRef.put(file).then(()=>avatarRef.getDownloadURL()):Promise.resolve("https://via.placeholder.com/50");
    return upload.then(url=>db.collection("users").doc(uid).set({email,avatar:url,created:new Date().toLocaleString(),following:[]}));
  }).then(()=>{alert("Account created!"); show("login");}).catch(e=>alert(e.message));
}

// LOGIN
function login(){
  const email=loginEmail.value.trim(),pass=loginPass.value;
  if(!email||!pass){alert("Enter email/password"); return;}
  auth.signInWithEmailAndPassword(email,pass).catch(e=>alert(e.message));
}

// PASSWORD RESET
function resetPassword(){
  const email=loginEmail.value.trim();
  if(!email){alert("Enter email first"); return;}
  auth.sendPasswordResetEmail(email).then(()=>alert("Password reset email sent")).catch(e=>alert(e.message));
}

// LOGOUT
function logout(){ auth.signOut(); }

// POST & COMMENTS functions here same as previous code with reactions, edit/delete

// INIT
auth.onAuthStateChanged(user=>{
  if(user){
    document.getElementById("userEmail").innerText=user.email;
    db.collection("users").doc(user.uid).get().then(d=>document.getElementById("userAvatar").src=d.data().avatar||"https://via.placeholder.com/50");
    show("home");
    // call your subscribePosts() and loadSuggestions() here
  } else show("login");
});
</script>
</body>
</html>
